<!doctype html>
<html lang="en">
<head>
  
  <meta charset="utf-8" />
  <title>Tag Cloud</title>
  
  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
  <link rel="stylesheet" href="css/style.css" />
  <script src="js/jquery-1.6.4.js"></script>
  <script src="js/jquery-ui-1.8.16.custom.min.js"></script>
  <script src="js/jquery.isotope-1.4.1.js"></script>
  <script src="js/tag-cloud.js"></script>
	<!--script type="text/javascript" src="js/jquery.easing.js"></script>
	<script type="text/javascript" src="js/jquery.dimensions.js"></script>
	<script type="text/javascript" src="js/jquery.accordion.js"></scrip--t
  
  <!-- scripts at bottom of page -->

</head>
<body>
  
    <nav id="site-nav">
        <h1><a href="../index.html">Isotope</a></h1>
        
        <section id="options" class="clearfix">
        <h2>Politiker</h2>
        <div id="accordion"></div>        


<script>
  
	$.getJSON("../data/Factions.json",function(factions)
	{
	 	a="";
		i=0;
		factions.sort(sortAbbreviation);
		$.each(factions, function(key, value)
		{ 
			i++;
			faction=(value.abbreviation==='-'?'NONE':value.abbreviation);
			a+='<br><a href="#faction'+faction+'" style="font-size:14px;">'
				+value.name
				+'</a><div><ul id="politiker'
				+faction
				+'" class="option-set clearfix" data-option-key="politician"></ul></div>';
		});
		$("#accordion").html(a);
		doPoliticians();
	})
  
  	function sortAbbreviation(a,b){  
		return a.abbreviation > b.abbreviation ? 1 : -1;  
	};  
	function sortFaction(a,b){  
		return a.faction > b.faction ? 1 : -1;  
	};  
	function doPoliticians(){
			$.getJSON("../data/councillors.json",function(councillors)
			{
				councillors.sort(sortFaction);
				a="";
				faction='';
				i=0;
				$.each(councillors, function(key, value)
				{ 
					i++;
					name = value.faction+" "+ value.firstName+' '+value.lastName;
					id= value.id;//value.firstName+'_'+value.lastName;
					val = value.id;//value.firstName+value.lastName;
					a='<li><a href="#'+id+'" data-option-value="'+val+'">'+name+'</a>';
					//a='<li>'+name+'</li>';
					//a=name;
					faction=(value.faction==='-'?'NONE':value.faction);
					$("#politiker"+faction).html( $("#politiker"+faction).html()+a );
					//a+='<li>'+name+'</li>';
				});
				//$("#politiker_"+value.faction).html();
				//alert (a);
				//id":1353,"updated":"2011-05-02T15:20:28Z","firstName":"Giuseppe","lastName":"a Marca","active":false,"code":null,"officialDenomination":null},{"id":1354,"updated":"2011-05-02T15:20:38Z","firstName":"Alois","lastName":"Ab Yberg","active":false,"code":null,"officialDenomination":null}
				// $(this).addClass("done");
		  })
		  //jQuery('#accordion').accordion(); 
	}

  /*
  
                <li><a href="#Heinz_Kunz" data-option-value="HeinzKunz">Heinz Kunz</a>
              <li><a href="../docs/options.html">Options</a>
              <li><a href="../docs/methods.html">Methods</a>
              <li><a href="../docs/layout-modes.html">Layout modes</a>
              <li><a href="../docs/filtering.html">Filtering</a>
              <li><a href="../docs/sorting.html">Sorting</a>
              <li><a href="../docs/animating.html">Animating</a>
              <li><a href="../docs/adding-items.html">Adding items</a>
              <li><a href="../docs/extending-isotope.html">Extending Isotope</a>
              <li><a href="../docs/help.html">Help</a>
              <li><a href="../docs/license.html">License</a>

  */
</script>        
      
        </section> <!-- options -->
        
      </nav> <!-- #site-nav -->
  
  <section id="content">
  
  <div id="container" />
  
  <script>
    $(function(){
      var $container = $('#container');
      $container.isotope({
          itemSelector: '.element'
      });

      // create / load item map
      var tagClouds = {
          "HeinzKunz": {"Homer":3, "Maggie":5, "Bart": 3, "Flenders":2, "Lisa": 6},
          "KarlHinz": {"Hinz":3, "Kunz":5, "Flux": 3, "Poff":2, "BÃ¤h": 6}
      };

      // add cloud of heinzkunz as default content
      addTagMap($container, tagClouds["HeinzKunz"])

      // get all selectable options
      var $optionSets = $('#options .option-set'),
          $optionLinks = $optionSets.find('a');

      // set the click action on all the options
      $optionLinks.click(function(){
          var $this = $(this);
          // don't proceed if already selected
          if ( $this.hasClass('selected') ) {
            return false;
          }

          // select new option, deselect old option
          var $optionSet = $this.parents('.option-set');
          $optionSet.find('.selected').removeClass('selected');
          $this.addClass('selected');

          // make option object dynamically, i.e. { filter: '.my-filter-class' }
          var options = {},
              key = $optionSet.attr('data-option-key'),
              value = $this.attr('data-option-value');
          // parse 'false' as false boolean
          value = value === 'false' ? false : value;
          options[ key ] = value;
          if ( key === 'politician' ) {
              removeAllTags($container);
              addTagMap($container, tagClouds[value]); // add tags for politician
          } else {
            // otherwise, apply new options
            $container.isotope( options );
          }

          return false;
      });
    });
  </script>
    
  </section> <!-- #content -->
  
</body>
</html>